# Massive load profile - Stress testing and benchmarking
# Target: 1M users, ~10M teams, ~100M+ resources
# Generation time: ~10-20 hours
# REQUIRED: PostgreSQL or MySQL with high-performance configuration
# Recommended hardware: 32GB+ RAM, SSD storage, multi-core CPU

profile:
  name: massive
  description: "Massive-scale stress test and benchmark (1M users)"
  version: 1.0

global:
  random_seed: 42
  batch_size: 2000
  progress_bar: true
  parallel: true
  workers: 16
  email_domain: "loadtest.example.com"
  output_report: "reports/massive_load_report.json"
  log_level: WARNING  # Reduce logging overhead

database:
  pool_size: 50
  max_overflow: 100
  pool_timeout: 120
  echo: false

scale:
  # Users
  users: 1000000
  users_active_percent: 70
  users_admin_percent: 0.5

  # Teams
  personal_teams_per_user: 1
  additional_teams_per_user: 10
  teams_private_percent: 70
  teams_public_percent: 30

  # Team membership
  members_per_team_min: 1
  members_per_team_max: 200
  members_per_team_distribution: "power_law"

  # API Tokens
  tokens_per_user_min: 2
  tokens_per_user_max: 20
  tokens_per_user_avg: 7
  tokens_active_percent: 80

  # Gateways
  gateways: 50000
  tools_per_gateway_min: 30
  tools_per_gateway_max: 200
  tools_per_gateway_avg: 80
  tools_enabled_percent: 95

  # Resources
  resources_per_user_min: 100
  resources_per_user_max: 500
  resources_per_user_avg: 150

  # Prompts
  prompts_per_user_min: 100
  prompts_per_user_max: 500
  prompts_per_user_avg: 150

  # Virtual Servers
  servers_per_user_min: 5
  servers_per_user_max: 30
  servers_per_user_avg: 15

  # A2A Agents
  a2a_agents_per_user_min: 0
  a2a_agents_per_user_max: 8
  a2a_agents_per_user_avg: 3

  # Server Associations
  tools_per_server_min: 3
  tools_per_server_max: 30
  tools_per_server_avg: 8
  resources_per_server_min: 10
  resources_per_server_max: 80
  resources_per_server_avg: 15
  prompts_per_server_min: 5
  prompts_per_server_max: 50
  prompts_per_server_avg: 12
  a2a_agents_per_server_min: 0
  a2a_agents_per_server_max: 5
  a2a_agents_per_server_avg: 2

  # Metrics
  metrics_per_tool_min: 50
  metrics_per_tool_max: 500
  metrics_per_tool_avg: 120
  metrics_per_resource_min: 30
  metrics_per_resource_max: 300
  metrics_per_resource_avg: 60
  metrics_per_prompt_min: 30
  metrics_per_prompt_max: 250
  metrics_per_prompt_avg: 50
  metrics_per_server_min: 100
  metrics_per_server_max: 1000
  metrics_per_server_avg: 300
  metrics_per_a2a_agent_min: 50
  metrics_per_a2a_agent_max: 800
  metrics_per_a2a_agent_avg: 250

  # Activity Logs
  logs_per_token_min: 200
  logs_per_token_max: 2000
  logs_per_token_avg: 700
  auth_events_per_user_min: 20
  auth_events_per_user_max: 200
  auth_events_per_user_avg: 70
  permission_audits_per_user_min: 50
  permission_audits_per_user_max: 500
  permission_audits_per_user_avg: 150

  # MCP Sessions
  mcp_sessions_per_server_min: 5
  mcp_sessions_per_server_max: 50
  mcp_sessions_per_server_avg: 20
  mcp_messages_per_session_min: 10
  mcp_messages_per_session_max: 100
  mcp_messages_per_session_avg: 40
  resource_subscription_rate: 0.12  # 12% of resources subscribed

  # Workflow State
  invitation_generation_rate: 0.35  # 35% of teams
  join_request_generation_rate: 0.25  # 25% of teams
  token_revocation_rate: 0.10  # 10% of tokens
  oauth_token_rate: 0.12  # 12% of user-gateway combinations

distributions:
  team_size: "power_law"
  resource_access: "zipf"
  prompt_access: "zipf"
  tool_invocation: "zipf"
  temporal: "exponential_decay"

temporal:
  start_date: "2022-01-01"
  end_date: "2025-10-12"
  recent_data_percent: 80
  historical_data_percent: 20

realism:
  use_faker: true
  faker_locale: "en_US"
  name_length_min: 5
  name_length_max: 50
  description_length_min: 50
  description_length_max: 200

performance:
  batch_size: 2000
  commit_frequency: 20000
  disable_indexes: false
  analyze_after_load: true

generation_order:
  # Core entities (must come first)
  - users
  - teams
  - team_members
  - tokens
  - gateways
  - tools
  - resources
  - prompts
  - servers
  - a2a_agents
  # Associations (depend on core entities)
  - server_tool_associations
  - server_resource_associations
  - server_prompt_associations
  - server_a2a_associations
  # Metrics (depend on core entities)
  - tool_metrics
  - resource_metrics
  - prompt_metrics
  - server_metrics
  - a2a_agent_metrics
  # Activity logs (depend on core entities)
  - token_usage_logs
  - email_auth_events
  - permission_audit_logs
  # Sessions (depend on servers and resources)
  - mcp_sessions
  - mcp_messages
  - resource_subscriptions
  # Workflow state (depend on core entities)
  - team_invitations
  - team_join_requests
  - token_revocations
  - oauth_tokens

validation:
  enabled: true
  checks:
    - foreign_keys
    - required_fields
    - email_formats

reporting:
  enabled: true
  format: json
  output_file: "reports/massive_load_report.json"
